(self.webpackChunkespresso=self.webpackChunkespresso||[]).push([[865],{3905:function(n,e,t){"use strict";t.d(e,{Zo:function(){return c},kt:function(){return m}});var a=t(7294);function i(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function r(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,a)}return t}function o(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?r(Object(t),!0).forEach((function(e){i(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function s(n,e){if(null==n)return{};var t,a,i=function(n,e){if(null==n)return{};var t,a,i={},r=Object.keys(n);for(a=0;a<r.length;a++)t=r[a],e.indexOf(t)>=0||(i[t]=n[t]);return i}(n,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(a=0;a<r.length;a++)t=r[a],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}var l=a.createContext({}),p=function(n){var e=a.useContext(l),t=e;return n&&(t="function"==typeof n?n(e):o(o({},e),n)),t},c=function(n){var e=p(n.components);return a.createElement(l.Provider,{value:e},n.children)},d={inlineCode:"code",wrapper:function(n){var e=n.children;return a.createElement(a.Fragment,{},e)}},u=a.forwardRef((function(n,e){var t=n.components,i=n.mdxType,r=n.originalType,l=n.parentName,c=s(n,["components","mdxType","originalType","parentName"]),u=p(t),m=i,b=u["".concat(l,".").concat(m)]||u[m]||d[m]||r;return t?a.createElement(b,o(o({ref:e},c),{},{components:t})):a.createElement(b,o({ref:e},c))}));function m(n,e){var t=arguments,i=e&&e.mdxType;if("string"==typeof n||i){var r=t.length,o=new Array(r);o[0]=u;var s={};for(var l in e)hasOwnProperty.call(e,l)&&(s[l]=e[l]);s.originalType=n,s.mdxType="string"==typeof n?n:i,o[1]=s;for(var p=2;p<r;p++)o[p]=t[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},7288:function(n,e,t){"use strict";t.r(e),t.d(e,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return c},default:function(){return u}});var a=t(2122),i=t(9756),r=(t(7294),t(3905)),o=["components"],s={title:"Bandstructure Calculation",sidebar_label:"Bandstructure"},l=void 0,p={unversionedId:"hands-on/bands",id:"hands-on/bands",isDocsHomePage:!1,title:"Bandstructure Calculation",description:"Before we can run bands calculation, we need to perform single-point self",source:"@site/docs/hands-on/bands.md",sourceDirName:"hands-on",slug:"/hands-on/bands",permalink:"/espresso/hands-on/bands",editUrl:"https://github.com/pranabdas/espresso/blob/master/docs/hands-on/bands.md",version:"current",frontMatter:{title:"Bandstructure Calculation",sidebar_label:"Bandstructure"},sidebar:"docs",previous:{title:"DOS calculation",permalink:"/espresso/hands-on/dos"},next:{title:"Al (metal)",permalink:"/espresso/hands-on/aluminum"}},c=[],d={toc:c};function u(n){var e=n.components,s=(0,i.Z)(n,o);return(0,r.kt)("wrapper",(0,a.Z)({},d,s,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Before we can run ",(0,r.kt)("inlineCode",{parentName:"p"},"bands")," calculation, we need to perform single-point self\nconsistent field calculation (",(0,r.kt)("inlineCode",{parentName:"p"},"scf"),"). We have our input ",(0,r.kt)("inlineCode",{parentName:"p"},"scf")," file with some new\nparameters:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="src/silicon/si_bands_scf.in"',title:'"src/silicon/si_bands_scf.in"'},"&CONTROL\n  calculation = 'scf',\n  restart_mode = 'from_scratch',\n  prefix = 'silicon',\n  outdir = './tmp/'\n  pseudo_dir = './pseudos/'\n  verbosity = 'high'\n/\n\n&SYSTEM\n  ibrav =  2,\n  celldm(1) = 10.2076,\n  nat =  2,\n  ntyp = 1,\n  ecutwfc = 50,\n  ecutrho = 400,\n  nbnd = 8,\n/\n\n&ELECTRONS\n  conv_thr = 1e-8,\n  mixing_beta = 0.6\n/\n\nATOMIC_SPECIES\n  Si 28.086 Si.pz-vbc.UPF\n\nATOMIC_POSITIONS (alat)\n  Si 0.0 0.0 0.0\n  Si 0.25 0.25 0.25\n\nK_POINTS (automatic)\n  8 8 8 0 0 0\n")),(0,r.kt)("p",null,"Run the ",(0,r.kt)("inlineCode",{parentName:"p"},"scf")," calculation:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pw.x < si_bands_scf.in > si_bands_scf.out\n")),(0,r.kt)("p",null,"Next step is our band calculation (non-self consistent field) calculation. Now\nwe can specify ",(0,r.kt)("inlineCode",{parentName:"p"},"nbnd")," and denser k-points grid. We create the input file for\nband calculation:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="src/silicon/si_bands.in"',title:'"src/silicon/si_bands.in"'},"&control\n  calculation = 'bands',\n  restart_mode = 'from_scratch',\n  prefix = 'silicon',\n  outdir = './tmp/'\n  pseudo_dir = '../pseudos/'\n  verbosity = 'high'\n/\n\n&system\n  ibrav =  2,\n  celldm(1) = 10.2076,\n  nat =  2,\n  ntyp = 1,\n  ecutwfc = 50,\n  ecutrho = 400,\n  nbnd = 8\n /\n\n&electrons\n  conv_thr = 1e-8,\n  mixing_beta = 0.6\n /\n\nATOMIC_SPECIES\n  Si 28.086  Si.pz-vbc.UPF\n\nATOMIC_POSITIONS (alat)\n  Si 0.00 0.00 0.00\n  Si 0.25 0.25 0.25\n\nK_POINTS {crystal_b}\n5\n  0.0000 0.5000 0.0000 20  !L\n  0.0000 0.0000 0.0000 30  !G\n  -0.500 0.0000 -0.500 10  !X\n  -0.375 0.2500 -0.375 30  !U\n  0.0000 0.0000 0.0000 20  !G\n")),(0,r.kt)("p",null,"Again run ",(0,r.kt)("inlineCode",{parentName:"p"},"pw.x")," for ",(0,r.kt)("inlineCode",{parentName:"p"},"bands")," calculation:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pw.x < si_bands.in > si_bands.out\n")),(0,r.kt)("p",null,"The bands are now calculated. We need some post processing in order to obtain\nthe data in more usable manner. Input file for ",(0,r.kt)("inlineCode",{parentName:"p"},"bands.x")," :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="src/silicon/si_bands_pp.in"',title:'"src/silicon/si_bands_pp.in"'},"&BANDS\n  prefix = 'silicon'\n  outdir = './tmp/'\n  filband = 'si_bands.dat'\n/\n")),(0,r.kt)("p",null,"Run ",(0,r.kt)("inlineCode",{parentName:"p"},"bands.x")," from post processing (PP) module:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"bands.x < si_bands_pp.in > si_bands_pp.out\n")),(0,r.kt)("p",null,"Next we need to run ",(0,r.kt)("inlineCode",{parentName:"p"},"plotband.x")," We can run is interactively as follows (or you\ncan provide an input file instead). In oder to run interactively, type\n",(0,r.kt)("inlineCode",{parentName:"p"},"plotband.x")," in your terminal."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"     Input file > si_bands.dat\nReading    8 bands at     91 k-points\nRange:   -5.8300   16.3420eV  Emin, Emax > -6, 16\nhigh-symmetry point:  0.5000 0.5000 0.5000   x coordinate   0.0000\nhigh-symmetry point:  0.0000 0.0000 0.0000   x coordinate   0.8660\nhigh-symmetry point:  1.0000 0.0000 0.0000   x coordinate   1.8660\nhigh-symmetry point:  1.0000 0.2500 0.2500   x coordinate   2.2196\nhigh-symmetry point:  0.0000 0.0000 0.0000   x coordinate   3.2802\noutput file (gnuplot/xmgr) > si_bands.gnuplot\nbands in gnuplot/xmgr format written to file si_bands.gnuplot\n\n\noutput file (ps) > si_bands.ps\nEfermi > 6.6416\ndeltaE, reference E (for tics) 4, 0\nbands in PostScript format written to file si_bands.ps\n")),(0,r.kt)("p",null,"You will have ",(0,r.kt)("inlineCode",{parentName:"p"},"si_bands.ps")," with band diagram. Or you can use your favorite\nplotting program to make plots:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="notebooks/si-bands.ipynb"',title:'"notebooks/si-bands.ipynb"'},"import matplotlib.pyplot as plt\nfrom matplotlib import rcParamsDefault\nimport numpy as np\n%matplotlib inline\n\nplt.rcParams[\"figure.dpi\"]=150\nplt.rcParams[\"figure.facecolor\"]=\"white\"\nplt.rcParams[\"figure.figsize\"]=(8, 6)\n\n# load data\ndata = np.loadtxt('../src/silicon/si_bands.dat.gnu')\n\nk = np.unique(data[:, 0])\nbands = np.reshape(data[:, 1], (-1, len(k)))\n\nfor band in range(len(bands)):\n    plt.plot(k, bands[band, :], linewidth=1, alpha=0.5, color='k')\nplt.xlim(min(k), max(k))\n\n# Fermi energy\nplt.axhline(6.6416, linestyle=(0, (5, 5)), linewidth=0.75, color='k', alpha=0.5)\n# High symmetry k-points (check bands_pp.out)\nplt.axvline(0.8660, linewidth=0.75, color='k', alpha=0.5)\nplt.axvline(1.8660, linewidth=0.75, color='k', alpha=0.5)\nplt.axvline(2.2196, linewidth=0.75, color='k', alpha=0.5)\n# text labels\nplt.xticks(ticks= [0, 0.8660, 1.8660, 2.2196, 3.2802], \\\n           labels=['L', '$\\Gamma$', 'X', 'U', '$\\Gamma$'])\nplt.ylabel(\"Energy (eV)\")\nplt.text(2.3, 5.6, 'Fermi energy', fontsize= small)\nplt.show()\n")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"band.png",src:t(2965).Z})),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The k values for high symmetry points can be found in the output file\n(si_bands_pp.out)."))))}u.isMDXComponent=!0},2965:function(n,e,t){"use strict";e.Z=t.p+"assets/images/silicon-bands-56f3d9af6b5d86ba5da780cbf6801b4a.png"}}]);