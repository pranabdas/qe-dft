(self.webpackChunkespresso=self.webpackChunkespresso||[]).push([[956],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=a.createContext({}),l=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},f=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),f=l(n),m=o,d=f["".concat(c,".").concat(m)]||f[m]||u[m]||r;return n?a.createElement(d,i(i({ref:t},p),{},{components:n})):a.createElement(d,i({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=f;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var l=2;l<r;l++)i[l]=n[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}f.displayName="MDXCreateElement"},3403:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return c},metadata:function(){return l},toc:function(){return p},default:function(){return f}});var a=n(2122),o=n(9756),r=(n(7294),n(3905)),i=["components"],s={title:"Magnetic system: bulk iron",sidebar_label:"Fe (magnetic)"},c=void 0,l={unversionedId:"hands-on/fe",id:"hands-on/fe",isDocsHomePage:!1,title:"Magnetic system: bulk iron",description:"I am following this example from the [ICTP online school 2021](",source:"@site/docs/hands-on/fe.md",sourceDirName:"hands-on",slug:"/hands-on/fe",permalink:"/espresso/hands-on/fe",editUrl:"https://github.com/pranabdas/espresso/blob/master/docs/hands-on/fe.md",version:"current",frontMatter:{title:"Magnetic system: bulk iron",sidebar_label:"Fe (magnetic)"},sidebar:"docs",previous:{title:"GaAs",permalink:"/espresso/hands-on/GaAs"},next:{title:"Ni (spin pol. bands)",permalink:"/espresso/hands-on/ni"}},p=[{value:"Convergence test for USPP",id:"convergence-test-for-uspp",children:[]},{value:"Density of states calculation",id:"density-of-states-calculation",children:[]}],u={toc:p};function f(e){var t=e.components,s=(0,o.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"I am following this example from the ",(0,r.kt)("a",{parentName:"p",href:"https://gitlab.com/QEF/materials-for-max-qe2021-online-school"},"ICTP online school 2021"),"."),(0,r.kt)("p",null,"We will perform the SCF KS orbital calculations on magnetic (",(0,r.kt)("inlineCode",{parentName:"p"},"nspin=2"),") iron.\nSince the d-orbitals of Fe atom are localized/ hard, we will use ultra-soft\npseudo potential (USPP)."),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"If we have crystal structure with only one atom per unit cell, or only one type\nof atoms, the only possible ordering is ferromagnetic. In such cases, we need to\nform supercell with more number of atoms or label multiple atoms separately, so\nthat their magnetic orientation could be different thus having the possibility\nof ferro- or antiferromagnetic final states."))),(0,r.kt)("p",null,"Run the SCF calculations for both ferro- and antiferromagnetic structures.\nNotice that for ferromagnetic, we have BCC structure with only one type of atom,\nwhile we use simple cubic structure for antiferromagnetic case with two\ndifferent atomic labels. For antiferromagnetic calculation, we need to start\nwith opposite initial spins."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pw.x -i pw.scf.fe_fm.in > pw.scf.fe_fm.out\npw.x -i pw.scf.fe_afm.in > pw.scf.fe_afm.out\n")),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"In case of ultrasoft pseudo potentials, the Quantum Espresso default of\n",(0,r.kt)("inlineCode",{parentName:"p"},"ecutrho")," 4 times of ",(0,r.kt)("inlineCode",{parentName:"p"},"ecutoff")," is not sufficient. We need to set ",(0,r.kt)("inlineCode",{parentName:"p"},"ecutrho")," 8 or\neven 12 times that of ",(0,r.kt)("inlineCode",{parentName:"p"},"ecutoff"),". We must test the convergence for our set\nvalues."))),(0,r.kt)("h2",{id:"convergence-test-for-uspp"},"Convergence test for USPP"),(0,r.kt)("p",null,"Below is the PWTK script file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="src/fe/fe_ecut.pwtk"',title:'"src/fe/fe_ecut.pwtk"'},'# load the pw.x input from file\nload_fromPWI pw.scf.fe_fm.in\n\n# dual is the ratio ecutrho/ecutwfc\nforeach dual { 4 8 12 } {\n\n    set fid [open etot-vs-ecutwfc.dual$dual.dat w]\n\n    foreach ecutwfc [seq 25 5 50] {\n\n        set name pw.Fe.scf.ecutwfc-$ecutwfc.dual-$dual\n\n        SYSTEM "ecutwfc = $ecutwfc\n                ecutrho = $ecutwfc*$dual "\n        runPW $name.in\n\n        set Etot [pwo_totene $name.out]\n        puts $fid "$ecutwfc $Etot"\n    }\n\n    close $fid\n}\n')),(0,r.kt)("p",null,"Run the script:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pwtk fe_ecut.pwtk\n")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Fe convergence",src:n(185).Z})),(0,r.kt)("h2",{id:"density-of-states-calculation"},"Density of states calculation"),(0,r.kt)("p",null,"PWTK script to calculate DOS and p-DOS:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"load_fromPWI pw.scf.fe_fm.in\n\nSYSTEM \" ecutwfc = 40\n         ecutrho = 320 \"\n\nset name Fe\n\nrunPW pw.$name.scf.in\n\nCONTROL { calculation = 'nscf' }\nSYSTEM  { occupations = 'tetrahedra' ,\n          degauss = ,  ! this is how variable is unset in PWTK\n}\nK_POINTS automatic {\n    12 12 12   1 1 1\n}\nrunPW pw.$name.nscf.in\n\nDOS \"\n    fildos = '$name.dos.dat'\n    Emin = 5.0\n    Emax = 20.0,\n    DeltaE = 0.1\n\"\nrunDOS dos.$name.in\n\nPROJWFC \"\n    filpdos = '$name.pdos.dat'\n    Emin = 5.0\n    Emax = 20.0,\n    DeltaE = 0.1\n\"\nrunPROJWFC projwfc.$name.in\n")),(0,r.kt)("p",null,"Below is the plots of total and projected density of states."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"density of states",src:n(3032).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"projected density of states",src:n(9339).Z})),(0,r.kt)("p",null,"Also see bandstructure of Fe with and without ",(0,r.kt)("a",{parentName:"p",href:"soc#bandstructure-of-fe-with-soc"},"SOC"),"."))}f.isMDXComponent=!0},185:function(e,t,n){"use strict";t.Z=n.p+"assets/images/fe-convergence-2aefca15b3e0939d06ca680afb8a71a1.png"},3032:function(e,t,n){"use strict";t.Z=n.p+"assets/images/fe-dos-27c1fcc8eaec7d396fa1bc74be579cc2.png"},9339:function(e,t,n){"use strict";t.Z=n.p+"assets/images/fe-pdos-776c198dd46078519795539284ddfcd0.png"}}]);